<!doctype html>
<html lang="en" class="light">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>The Sports Chronicle - Sports News, Analysis & Blog</title>
  <meta name="description"
    content="The Sports Chronicle: Your trusted source for sports news, expert analysis, and in-depth coverage. Get the latest updates on basketball, soccer, swimming, football and more." />
  <meta name="author" content="The Sports Chronicle" />
  <meta name="theme-color" content="#1e293b" />

  <!-- Resource Hints - Critical only -->
  <link rel="preconnect" href="https://whgjiirmcbsiqhjzgldy.supabase.co" crossorigin />
  <link rel="dns-prefetch" href="https://whgjiirmcbsiqhjzgldy.supabase.co" />

  <!-- Defer non-critical third-party connections -->
  <link rel="dns-prefetch" href="https://vercel-insights.com" />
  <link rel="dns-prefetch" href="https://vitals.vercel-insights.com" />

  <!-- Preload critical fonts with font-display swap -->
  <link rel="preload" href="/fonts/inter-var.woff2" as="font" type="font/woff2" crossorigin="anonymous" />
  <link rel="preload" href="/fonts/playfair-display-bold.woff2" as="font" type="font/woff2" crossorigin="anonymous" />

  <!-- SEO and Open Graph -->
  <meta property="og:title" content="The Sports Chronicle - Sports News, Analysis & Blog" />
  <meta property="og:description"
    content="The Sports Chronicle: Your trusted source for sports news, expert analysis, and in-depth coverage." />
  <meta property="og:image" content="/og-image.png" />
  <meta property="og:url" content="https://thesportschronicle.vercel.app" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Favicon and App Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />


  <!-- CRITICAL CSS -->
  <style>
    :root {
      --background: 0 0% 100%;
      --foreground: 0 0% 9%;
      --primary: 0 0% 9%;
      --border: 0 0% 90%;
      --radius: 0.5rem;
    }

    .dark {
      --background: 0 0% 9%;
      --foreground: 0 0% 98%;
      --primary: 0 0% 98%;
      --border: 0 0% 15%;
    }

    @font-face {
      font-family: Inter;
      font-style: normal;
      font-weight: 300 700;
      font-display: swap;
      src: url(/fonts/inter-var.woff2) format('woff2')
    }

    body {
      margin: 0;
      font-family: Inter, -apple-system, system-ui, sans-serif;
      background-color: hsl(var(--background));
      color: hsl(var(--foreground));
      -webkit-font-smoothing: antialiased;
      overflow-x: hidden;
    }

    /* Splash Screen Styles */
    #initial-loader {
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background-color: hsl(var(--background));
      z-index: 9999;
      transition: opacity 0.5s ease-out, visibility 0.5s;
    }

    .loader-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.5rem;
    }

    .loader-logo {
      width: 64px;
      height: 64px;
      border-radius: 50%;
      border: 2px solid hsl(var(--primary) / 0.1);
      padding: 4px;
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    .loader-text {
      font-weight: 600;
      font-size: 1.25rem;
      letter-spacing: -0.025em;
      opacity: 0.8;
    }

    .loader-spinner {
      width: 24px;
      height: 24px;
      border: 2px solid hsl(var(--primary) / 0.1);
      border-top-color: hsl(var(--primary));
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    @keyframes pulse {

      0%,
      100% {
        opacity: 1;
        transform: scale(1);
      }

      50% {
        opacity: 0.7;
        transform: scale(0.95);
      }
    }

    #root:not(:empty)+#initial-loader {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }
  </style>

  <script>
    // 1. ZOMBIE SERVICE WORKER KILL SWITCH
    // Force unregister all service workers to clear stale caching states.
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.getRegistrations().then(function (registrations) {
        for (var registration of registrations) {
          registration.unregister().then(function (boolean) {
            if (boolean) console.log("CLEANUP: Stale Service Worker Unregistered");
          });
        }
      });
    }

    // 2. ENHANCED DIAGNOSTIC BRIDGE
    (function () {
      var logs = [];
      var originalLog = console.log;
      console.log = function () {
        logs.push("[LOG] " + Array.from(arguments).join(' '));
        originalLog.apply(console, arguments);
      };
      var originalError = console.error;
      console.error = function () {
        logs.push("[ERR] " + Array.from(arguments).join(' '));
        originalError.apply(console, arguments);
      };

      // Handle uncaught errors (even in modules)
      window.addEventListener('error', function (e) {
        window.lastError = e; // Store for remote console inspection
        var overlay = document.getElementById('fatal-error-overlay');
        if (overlay) return;

        var d = document.createElement('div');
        d.id = "fatal-error-overlay";
        d.style = "position:fixed;top:0;left:0;width:100%;height:100%;background:#fff;color:#000;z-index:9999999;padding:20px;font-family:system-ui,-apple-system,sans-serif;overflow:auto;display:flex;flex-direction:column;";

        var errTitle = e.error && e.error.name ? e.error.name : "Application Error";
        var errMsg = e.message || (e.error ? e.error.message : "Undefined Reference or Syntax Error");
        var errLoc = (e.filename || 'bundle') + ":" + e.lineno + ":" + e.colno;

        d.innerHTML = "<h1 style='color:#e11;margin:0;font-size:24px;'>⚠️ Application Load Failed</h1>" +
          "<p style='color:#666;margin:10px 0;'>A critical error occurred during reload. This is often caused by cached assets being out of sync.</p>" +
          "<div style='background:#fee;padding:15px;margin:10px 0;border:1px solid #ecc;border-radius:4px;white-space:pre-wrap;font-family:monospace;font-size:13px;'>" +
          "<b style='color:#900;'>" + errTitle + ":</b> " + errMsg + "\n" +
          "<b style='color:#900;'>Source:</b> " + errLoc +
          "</div>" +
          "<h3>Diagnostic Logs:</h3>" +
          "<pre style='background:#f5f5f5;padding:10px;flex:1;overflow:auto;font-size:11px;font-family:monospace;border-radius:4px;'>" + logs.join('\n') + "</pre>" +
          "<div style='display:flex;gap:10px;margin-top:15px;'>" +
          "<button onclick='location.reload(true)' style='padding:12px 20px;background:#000;color:white;border:none;border-radius:6px;cursor:pointer;font-weight:bold;'>Hard Reload</button>" +
          "<button onclick='localStorage.clear();sessionStorage.clear();location.reload(true)' style='padding:12px 20px;background:#666;color:white;border:none;border-radius:6px;cursor:pointer;'>Clear Data & Reload</button>" +
          "</div>" +
          "<p style='margin-top:15px;font-size:12px;color:#999;'>Current Page: " + location.pathname + "</p>";
        document.body.appendChild(d);
      });

      console.log("Diagnostic Bridge v2.0 Active | Path: " + location.pathname);
    })();

    // 3. THEME INITIALIZATION
    (function () {
      try {
        var theme = localStorage.getItem('vite-ui-theme') || 'system';
        var dark = theme === 'dark' || (theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches);
        document.documentElement.classList.toggle('dark', dark);
      } catch (e) { }
    })();

    // 4. LOADER REMOVAL
    window.addEventListener('load', function () {
      setTimeout(function () {
        var loader = document.getElementById('initial-loader');
        if (loader) {
          loader.style.opacity = '0';
          loader.style.visibility = 'hidden';
          setTimeout(function () { loader.remove(); }, 500);
        }
      }, 300);
    });
  </script>
</head>

<body>
  <div id="root"></div>

  <!-- Splash Screen for immediate FCP -->
  <div id="initial-loader">
    <div class="loader-content">
      <img src="/logo-80.png" alt="The Sports Chronicle" class="loader-logo" width="64" height="64" loading="eager"
        fetchpriority="high" style="aspect-ratio: 1/1;" />
      <span class="loader-text">The Sports Chronicle</span>
      <div class="loader-spinner"></div>
    </div>
  </div>

  <!-- Defer main script to improve FCP -->
  <script type="module" src="/src/main.tsx" defer></script>
</body>

</html>